<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Inventory Management</title>
    <style>
body {
    font-family: 'Arial', sans-serif;
    background-color: #00004B; /* Dark Navy Blue Background */
    margin: 20px;
}

h1 {
    color: #fff; /* White text for the dark background */
    font-weight: 300;
    font-size: 2.5rem;
    margin-bottom: 20px;
    text-align: center;
}

.container {
    max-width: 1200px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 8px 16px rgba(255, 255, 255, 0.8); /* Wider white shadow */
}

.form-container {
    margin-bottom: 20px;
    padding: 15px;
    background-color: #e7f3fe;
    border-radius: 8px;
    display: none; /* Form hidden by default */
}

.form-container input, .form-container select {
    width: calc(100% - 20px);
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
}

.toggle-btn, .btn {
    display: inline-block;
    padding: 10px 15px;
    background-color: #4B4BFF; /* Brighter Blue Button */
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-bottom: 10px;
}

.toggle-btn:hover, .btn:hover {
    background-color: #3B3BFF; /* Slightly darker blue */
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

th, td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
    white-space: nowrap; /* Prevent overflow */
}

th {
    background-color: #C0C0C0; /* Updated to Silver (#C0C0C0) */
    color: white;
}

td input {
    width: 100px; /* Limit the width of input fields */
}

td {
    color: #333;
}

tr:hover {
    background-color: #f1f1f1;
}

.btn-red {
    background-color: #e74c3c; /* Red Button for Delete */
}

.btn-red:hover {
    background-color: #c0392b;
}

.action-buttons {
    display: flex;
    gap: 10px;
}
    </style>
</head>
<body>

    <div class="container">
        <h1>Employee Inventory Management</h1>

        <!-- Button to toggle the Add Employee Form -->
        <button class="toggle-btn" id="toggleFormBtn">Add Employee</button>

        <!-- Add Employee Form -->
        <div class="form-container" id="addEmployeeFormContainer">
            <h2>Add New Employee</h2>
            <form id="employeeForm">
                <input type="text" id="employeeName" placeholder="Employee Name" required>
                <select id="department">
                    <option value="Development">Development</option>
                    <option value="Finance">Finance</option>
                    <option value="Operational">Operational</option>
                    <option value="CS">CS</option> <!-- Replaced with CS -->
                    <option value="Sales">Sales</option>
                </select>
                <input type="text" id="laptop" placeholder="Laptop">
                <input type="text" id="mouse" placeholder="Mouse">
                <input type="text" id="headphones" placeholder="Headphones">
                <input type="text" id="phone" placeholder="Phone">
                <input type="text" id="monitor" placeholder="Monitor">
                <input type="text" id="keyboard" placeholder="Keyboard">
                <input type="text" id="phoneNumber" placeholder="Phone Number">
                <button type="submit">Submit</button>
            </form>
        </div>

        <!-- Tables for each department -->
        <div id="departmentTables">
            <!-- Development Department -->
            <div class="department-container">
                <h2>Development</h2>
                <table id="developmentTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Laptop</th>
                            <th>Mouse</th>
                            <th>Headphones</th>
                            <th>Phone</th>
                            <th>Monitor</th>
                            <th>Keyboard</th>
                            <th>Phone Number</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="developmentBody">
                        <!-- Development employees will go here -->
                    </tbody>
                </table>
            </div>

            <!-- Finance Department -->
            <div class="department-container">
                <h2>Finance</h2>
                <table id="financeTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Laptop</th>
                            <th>Mouse</th>
                            <th>Headphones</th>
                            <th>Phone</th>
                            <th>Monitor</th>
                            <th>Keyboard</th>
                            <th>Phone Number</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="financeBody">
                        <!-- Finance employees will go here -->
                    </tbody>
                </table>
            </div>

            <!-- Operational Department -->
            <div class="department-container">
                <h2>Operational</h2>
                <table id="operationalTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Laptop</th>
                            <th>Mouse</th>
                            <th>Headphones</th>
                            <th>Phone</th>
                            <th>Monitor</th>
                            <th>Keyboard</th>
                            <th>Phone Number</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="operationalBody">
                        <!-- Operational employees will go here -->
                    </tbody>
                </table>
            </div>

            <!-- CS Department -->
            <div class="department-container">
                <h2>CS</h2> <!-- Updated to CS -->
                <table id="csTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Laptop</th>
                            <th>Mouse</th>
                            <th>Headphones</th>
                            <th>Phone</th>
                            <th>Monitor</th>
                            <th>Keyboard</th>
                            <th>Phone Number</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="csBody">
                        <!-- CS employees will go here -->
                    </tbody>
                </table>
            </div>

            <!-- Sales Department -->
            <div class="department-container">
                <h2>Sales</h2>
                <table id="salesTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Laptop</th>
                            <th>Mouse</th>
                            <th>Headphones</th>
                            <th>Phone</th>
                            <th>Monitor</th>
                            <th>Keyboard</th>
                            <th>Phone Number</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="salesBody">
                        <!-- Sales employees will go here -->
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCH3j43cUp-EofMU8og7Tfy0ZoKfb_i700",
            authDomain: "fan-international.firebaseapp.com",
            projectId: "fan-international",
            storageBucket: "fan-international.appspot.com",
            messagingSenderId: "1092391632228",
            appId: "1:1092391632228:web:f2c6e6fd3194b68f7bce71",
            measurementId: "G-EBQY14XSSC"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app); // Firestore initialization

        // Function to normalize department names
        function normalizeDepartmentName(department) {
            return department.toLowerCase().replace(/\s+/g, '');
        }

        // Real-time listener for the employees collection
        onSnapshot(collection(db, "employees"), (snapshot) => {
            // Clear current table data before updating
            document.getElementById('developmentBody').innerHTML = '';
            document.getElementById('financeBody').innerHTML = '';
            document.getElementById('operationalBody').innerHTML = '';
            document.getElementById('csBody').innerHTML = ''; // Updated for CS
            document.getElementById('salesBody').innerHTML = '';

            // Loop through snapshot and render each employee
            snapshot.forEach((doc) => {
                const employee = doc.data();
                renderEmployee(employee, doc.id);
            });
        });

        // Function to render employees in the respective department tables
        function renderEmployee(employee, employeeId) {
            const row = `
                <tr id="row-${employeeId}">
                    <td id="name-${employeeId}">${employee.name}</td>
                    <td id="laptop-${employeeId}">${employee.laptop}</td>
                    <td id="mouse-${employeeId}">${employee.mouse}</td>
                    <td id="headphones-${employeeId}">${employee.headphones}</td>
                    <td id="phone-${employeeId}">${employee.phone}</td>
                    <td id="monitor-${employeeId}">${employee.monitor}</td>
                    <td id="keyboard-${employeeId}">${employee.keyboard}</td>
                    <td id="phoneNumber-${employeeId}">${employee.phoneNumber}</td>
                    <td id="actions-${employeeId}" class="action-buttons">
                        <button class="btn" onclick="editEmployee('${employeeId}')">Edit</button>
                        <button class="btn btn-red" onclick="deleteEmployee('${employeeId}')">Delete</button>
                    </td>
                </tr>
            `;

            const departmentBody = document.getElementById(normalizeDepartmentName(employee.department) + 'Body');
            if (departmentBody) {
                departmentBody.innerHTML += row;
            } else {
                console.error("Department body not found for", employee.department);
            }
        }

        // Add employee functionality
        const employeeForm = document.getElementById('employeeForm');
        employeeForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const name = document.getElementById('employeeName').value;
            const department = document.getElementById('department').value;
            const laptop = document.getElementById('laptop').value;
            const mouse = document.getElementById('mouse').value;
            const headphones = document.getElementById('headphones').value;
            const phone = document.getElementById('phone').value;
            const monitor = document.getElementById('monitor').value;
            const keyboard = document.getElementById('keyboard').value;
            const phoneNumber = document.getElementById('phoneNumber').value;

            const newEmployee = {
                name,
                department,
                laptop: laptop || 'N/A',
                mouse: mouse || 'N/A',
                headphones: headphones || 'N/A',
                phone: phone || 'N/A',
                monitor: monitor || 'N/A',
                keyboard: keyboard || 'N/A',
                phoneNumber: phoneNumber || 'N/A',
            };

            try {
                await addDoc(collection(db, "employees"), newEmployee);
                document.getElementById('employeeForm').reset(); // Reset the form after successful submission
                alert("Employee added successfully!");
            } catch (error) {
                console.error("Error adding employee: ", error);
            }
        });

        // Edit employee functionality
        window.editEmployee = async function(employeeId) {
            // Logic for editing employee goes here (if needed)
        };

        // Delete employee functionality
        window.deleteEmployee = async function(employeeId) {
            if (confirm("Are you sure you want to delete this employee?")) {
                try {
                    await deleteDoc(doc(db, "employees", employeeId));
                    alert("Employee deleted successfully.");
                } catch (error) {
                    console.error("Error deleting employee: ", error);
                    alert("Error deleting employee: " + error.message);
                }
            }
        };

    </script>

</body>
</html>
